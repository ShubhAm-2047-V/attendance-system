<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add User | AttendEase</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="dashboard-bg">

<div class="form-wrapper">
    <div class="glass-card add-user-card">

        <!-- HEADER -->
        <div class="add-user-header">
            <h2 class="add-user-title">Add New User</h2>
            <p class="add-user-subtitle">
                Create admin, teacher, student and cc
            </p>
        </div>

        <!-- FORM (SINGLE COLUMN) -->
        <form method="POST" class="add-user-form single-column">

            <label>Username</label>
            <input type="text" name="username" placeholder="Enter username" required>

            <label>Password</label>
            <input type="password" name="password" placeholder="Enter password" required>

            <label>Role</label>
            <select name="role" id="role" onchange="toggleRoleFields()" required>
                <option value="">Select Role</option>
                <option value="admin">Admin</option>
                <option value="teacher">Teacher</option>
                <option value="cc">CC</option>
                <option value="student">Student</option>
            </select>

            <!-- Student + CC -->
            <div id="student-fields" class="hidden slide-box">
                <label>Year</label>
                <select name="year">
                    <option value="">Select Year</option>
                    <option value="FY">FY</option>
                    <option value="SY">SY</option>
                    <option value="TY">TY</option>
                </select>

                <label>Division</label>
                <select name="division">
                    <option value="">Select Division</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                </select>
            </div>

            <!-- Teacher -->
            <div id="teacher-fields" class="hidden slide-box">
                <label>Assign Subject</label>
                <select name="subject_id">
                    <option value="">Select Subject</option>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}">{{ subject.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <label>Phone Number</label>
            <input type="text" name="phone" placeholder="Enter phone number">

            <!-- ACTIONS (BOTTOM CENTER) -->
            <div class="add-user-actions">
                <button type="submit" class="login-btn">
                    Create User
                </button>

                <a href="{{ url_for('admin') }}" class="back-link center-link">
                    ‚Üê Back to Admin Panel
                </a>
            </div>

        </form>

    </div>
</div>

<script>
function toggleRoleFields() {
    const role = document.getElementById("role").value;
    const student = document.getElementById("student-fields");
    const teacher = document.getElementById("teacher-fields");

    student.classList.add("hidden");
    teacher.classList.add("hidden");

    if (role === "student" || role === "cc") {
        student.classList.remove("hidden");
    }

    if (role === "teacher") {
        teacher.classList.remove("hidden");
    }
}

window.addEventListener("DOMContentLoaded", toggleRoleFields);
</script>

</body>
</html>
