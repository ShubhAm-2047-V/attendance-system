<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin Panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="dashboard-bg">

<div class="dashboard-card">

    <!-- Header -->
    <div class="dashboard-header">
        <h2>Admin Panel</h2>
        <p>Manage users</p>
    </div>

    <!-- Add User Button -->
    <a href="{{ url_for('add_user') }}" class="action-card">
        <h3>+ Add New User</h3>
        <p>Create admin, teacher or student</p>
    </a>

    <!-- Users List -->
    <div class="table-wrapper" style="margin-top:20px;">
        <table class="attendance-table">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>

                    <td>
    <span class="role-badge role-{{ user.role }}">
        {{ user.role }}
    </span>
    {% if not user.is_active %}
        <span class="role-badge role-admin">Locked</span>
    {% endif %}
</td>


                    <td>
    {% if user.id != current_user.id %}

        <a href="{{ url_for('toggle_user', user_id=user.id) }}"
           class="action-btn action-edit">
            {{ 'Lock' if user.is_active else 'Unlock' }}
        </a>

        <a href="{{ url_for('delete_user', user_id=user.id) }}"
           class="action-btn action-delete"
           onclick="return confirm('Delete this user?')">
            Delete
        </a>

    {% else %}
        â€”
    {% endif %}
</td>

                </tr>

                {% else %}
                <tr>
                    <td colspan="3" style="text-align:center;color:#6b7280;">
                        No users found
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Logout -->
    <a href="{{ url_for('logout') }}" class="logout-btn-full">
        Logout
    </a>

</div>

</body>
</html>
